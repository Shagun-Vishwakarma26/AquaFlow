<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AquaFlow | Dashboard</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        :root { --primary: #0077b6; --secondary: #003087; --accent: #00b4d8; --bg-light: #f4f4f4; }
        body { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background-color: var(--bg-light); overflow: hidden; }
        .navbar { height: 60px; background: rgba(0, 0, 0, 0.9); backdrop-filter: blur(10px); display: flex; justify-content: space-between; align-items: center; padding: 0 40px; color: white; z-index: 1000; }
        .logo { font-size: 24px; font-weight: bold; }
        .nav-right { display: flex; align-items: center; gap: 20px; }
        .logout-btn { color: white; text-decoration: none; border: 1px solid white; padding: 5px 15px; border-radius: 20px; font-size: 14px; }
        .dashboard-wrapper { display: flex; height: calc(100vh - 60px); }
        .sidebar { width: 250px; background: var(--secondary); color: white; padding: 30px 20px; flex-shrink: 0; }
        .sidebar a { display: block; color: white; text-decoration: none; padding: 12px 15px; margin-bottom: 5px; border-radius: 8px; transition: 0.3s; }
        .sidebar a:hover, .sidebar a.active { background: rgba(255, 255, 255, 0.1); }
        .main-content { flex-grow: 1; padding: 25px; overflow-y: auto; }
        .stats-container { display: flex; gap: 20px; margin-bottom: 25px; }
        .stat-card { background: white; padding: 20px; border-radius: 12px; flex: 1; box-shadow: 0 4px 6px rgba(0,0,0,0.05); border-left: 5px solid var(--primary); }
        .card { background: white; padding: 20px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        #map { height: 350px; width: 100%; border-radius: 8px; }
        .bottom-grid { display: flex; gap: 20px; }
        .bottom-grid .card { flex: 1; }
        input, textarea { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; }
        button { background: var(--primary); color: white; border: none; padding: 10px 25px; border-radius: 6px; font-weight: bold; cursor: pointer; }
        button:active { transform: scale(0.98); }
        /* Style for the chatbot response */
        .bot-response { font-size: 0.9rem; color: #555; font-style: italic; margin-top: 10px; }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="logo">üíß AquaFlow</div>
        <div class="nav-right">
            <span>üìû 1800-123-456</span>
            <a href="index.html" class="logout-btn">Logout</a>
        </div>
    </nav>

    <div class="dashboard-wrapper">
        <aside class="sidebar">
            <h3 style="font-size: 0.7rem; opacity: 0.6; text-transform: uppercase;">User Menu</h3>
            <a href="#" onclick="alert('Viewing My Bookings...')">üì¶ My Booking</a>
            <a href="#" class="active">üöö Live Tracking</a>
            <a href="#" onclick="document.getElementById('botInput').focus()">ü§ñ Chatbot</a>
            <a href="#" onclick="document.getElementById('supportInput').focus()">üìû Support</a>
        </aside>

        <main class="main-content">
            <div class="stats-container">
                <div class="stat-card">Status<br><b>Confirmed</b></div>
                <div class="stat-card">Vehicle<br><b>On the Way</b></div>
                <div class="stat-card">ETA<br><b>25 mins</b></div>
            </div>

            <div class="card">
                <h3>üìç Live Tanker Tracking</h3>
                <div id="map"></div>
            </div>

            <div class="bottom-grid">
                <div class="card">
                    <h3>ü§ñ AquaBot</h3>
                    <input type="text" id="botInput" placeholder="Ask about tanker, timing...">
                    <button onclick="handleChat()">Send Message</button>
                    <div id="chatResponse" class="bot-response"></div>
                </div>

                <div class="card">
                    <h3>üìû Support & Issues</h3>
                    <textarea id="supportInput" placeholder="Describe your issue here..." rows="1"></textarea>
                    <button onclick="handleSupport()">Submit Ticket</button>
                </div>
            </div>
        </main>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // --- 1. INITIALIZE MAP ---
        const map = L.map("map").setView([19.076, 72.877], 13);
        L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(map);
        L.marker([19.076, 72.877]).addTo(map).bindPopup("Tanker MH-01-AX-1234").openPopup();
        setTimeout(() => { map.invalidateSize(); }, 300);

        // --- 2. CHATBOT LOGIC ---
        function handleChat() {
            const input = document.getElementById('botInput');
            const responseDiv = document.getElementById('chatResponse');
            
            if (input.value.trim() === "") {
                alert("Please type a question first!");
                return;
            }

            // Simulate bot "thinking"
            responseDiv.innerText = "AquaBot is typing...";
            
            setTimeout(() => {
                responseDiv.innerText = "Bot: Your tanker is currently in Kurla and will reach you in 25 minutes.";
                input.value = ""; // Clear input
            }, 800);
        }

        // --- 3. SUPPORT LOGIC ---
        function handleSupport() {
            const supportMsg = document.getElementById('supportInput');
            
            if (supportMsg.value.trim() === "") {
                alert("Please describe your issue before submitting.");
                return;
            }

            alert("Ticket Submitted! Our team will contact you shortly regarding: " + supportMsg.value);
            supportMsg.value = ""; // Clear textarea
        }
    </script>
</body>
</html>